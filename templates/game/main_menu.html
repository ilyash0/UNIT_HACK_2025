{% extends 'base.html' %}
{% load static %}

{% block title %}Игра{% endblock %}

{% block content %}
<div class="container">
    <h1>Здравствуй{% if nickname %}, {{ nickname }}{% endif %}!</h1>
    <p>Добро пожаловать в игру!</p>
    <div class="button-group">
        <button onclick="document.location.replace('{% url 'game:create_game' %}')">Создать игру</button>
        <button onclick="document.location.replace('{% url 'game:join_game' %}')">Присоединиться к игре</button>
    </div>
</div>

<script>
    (function () {
        function getCookie(name) {
            const value = "; " + document.cookie;
            const parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
        }

        if (!getCookie('nickname')) {
            const nick = prompt("Как вас зовут?", "");
            if (nick !== null && nick.trim() !== "") {
                const maxAge = 30 * 24 * 60 * 60; // 30 days
                document.cookie = `nickname=${encodeURIComponent(nick)}; max-age=${maxAge}; path=/`;
                window.location.reload();
            }
        }
    })();
</script>
{% endblock %}