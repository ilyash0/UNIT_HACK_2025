{% extends 'base.html' %}
{% block title %}Игра{% endblock %}

{% block content %}
    <h1>Здравствуй{% if nickname %}, {{ nickname }}{% endif %}!</h1>

    <script>
        (function () {
            function getCookie(name) {
                const value = "; " + document.cookie;
                const parts = value.split("; " + name + "=");
                if (parts.length === 2) return parts.pop().split(";").shift();
            }

            if (!getCookie('nickname')) {
                const nick = prompt("Как вас зовут?", "");
                if (nick !== null && nick.trim() !== "") {
                    const maxAge = 30 * 24 * 60 * 60;
                    document.cookie = `nickname=${encodeURIComponent(nick)}; max-age=${maxAge}; path=/`;
                    window.location.reload();
                }
            }
        })();
    </script>
{% endblock %}