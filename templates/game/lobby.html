{% extends 'base.html' %}
{% load static %}
{% block title %}Лобби игры{% endblock %}

{% block content %}
<div class="container lobby">
    <div class="left-column">
        <h2>Не готовы</h2>
        <ul class="player-list">
            {% for p in players %}
                {% if not p.ready %}
                    <li>{{ p.nickname }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
    <div class="center-column">
        <h2>Код на C#</h2>
        <pre class="code-block">using System;

public class Game
{
    public static void Main()
    {
        Console.WriteLine("Добро пожаловать в Smeshnyavka!");
        // Логика игры будет добавлена позже
    }
}</pre>
    </div>
    <div class="right-column">
        <h2>Готовы</h2>
        <ul class="player-list">
            {% for p in players %}
                {% if p.ready %}
                    <li>{{ p.nickname }}</li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
</div>
<div class="status">
    {% if game.started %}
        <p><strong>Игра началась!</strong></p>
    {% else %}
        <p>Ждём, пока все игроки нажмут «Я готов»…</p>
    {% endif %}
    {% if me %}
        <form action="{% url 'game:toggle_ready' code=game.code %}" method="post" class="ready-form">
            {% csrf_token %}
            <button type="submit">
                {% if me.ready %}Снять готовность{% else %}Я готов{% endif %}
            </button>
        </form>
    {% endif %}
</div>
{% endblock %}